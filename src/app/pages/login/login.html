<div class="login-page">
  <div class="login-container">
    <!-- Title -->
    <h2 *ngIf="!isForgotPasswordMode">
      {{ isRegisterMode ? 'Register' : 'Login' }}
    </h2>
    <h2 *ngIf="isForgotPasswordMode">Forgot Password</h2>

    <!-- Login/Register Form -->
    <form
      *ngIf="!isForgotPasswordMode"
      #authForm="ngForm"
      (ngSubmit)="isRegisterMode ? onRegister() : onLogin()"
      novalidate
    >
      <!-- Email -->
      <label>Email</label>
      <input
        type="email"
        [(ngModel)]="email"
        name="email"
        required
        email
        #emailCtrl="ngModel"
      />
      <div *ngIf="emailCtrl.invalid && emailCtrl.touched" class="error">
        <span *ngIf="emailCtrl.errors?.['required']">Email is required.</span>
        <span *ngIf="emailCtrl.errors?.['email']">Invalid email format.</span>
      </div>

      <!-- Password -->
      <label>Password</label>
      <div class="password-wrapper">
        <input
          [type]="showPassword ? 'text' : 'password'"
          [(ngModel)]="password"
          name="password"
          required
          minlength="6"
          #passwordCtrl="ngModel"
        />
        <span class="toggle-eye" (click)="togglePassword()">
          <span class="material-icons">
            {{ showPassword ? 'visibility' : 'visibility_off' }}
          </span>
        </span>
      </div>
      <div *ngIf="passwordCtrl.invalid && passwordCtrl.touched" class="error">
        <span *ngIf="passwordCtrl.errors?.['required']">Password is required.</span>
        <span *ngIf="passwordCtrl.errors?.['minlength']">
          Password must be at least 6 characters.
        </span>
      </div>

      <!-- Forgot Password -->
      <div *ngIf="!isRegisterMode" class="forgot-password">
        <a href="javascript:void(0)" (click)="toggleForgotPasswordMode()">
          Forgot Password?
        </a>
      </div>

      <button
        type="submit"
        class="login-btn"
        [disabled]="authForm.invalid"
      >
        {{ isRegisterMode ? 'Register' : 'Login' }}
      </button>
    </form>

    <!-- Forgot Password Form -->
    <form
      *ngIf="isForgotPasswordMode"
      #forgotForm="ngForm"
      (ngSubmit)="onForgotPassword()"
      novalidate
    >
      <label>Email</label>
      <input
        type="email"
        [(ngModel)]="email"
        name="email"
        required
        email
        #forgotEmailCtrl="ngModel"
      />
      <div *ngIf="forgotEmailCtrl.invalid && forgotEmailCtrl.touched" class="error">
        <span *ngIf="forgotEmailCtrl.errors?.['required']">Email is required.</span>
        <span *ngIf="forgotEmailCtrl.errors?.['email']">Invalid email format.</span>
      </div>

      <button
        type="submit"
        class="login-btn"
        [disabled]="forgotForm.invalid"
      >
        Send Reset Link
      </button>
      <a href="javascript:void(0)" (click)="toggleForgotPasswordMode()">Back to Login</a>
    </form>

    <div class="divider">OR</div>

    <!-- Google login -->
    <button class="google-btn" (click)="onGoogleLogin()">
      <img src="https://img.icons8.com/color/20/000000/google-logo.png" />
      Sign in with Google
    </button>

    <!-- Toggle login/register -->
    <div *ngIf="!isForgotPasswordMode" class="toggle-link">
      <a href="javascript:void(0)" (click)="toggleRegisterMode()">
        {{ isRegisterMode ? 'Already have an account? Login' : 'New user? Register here' }}
      </a>
    </div>

    <!-- Firebase Error -->
    
      <div *ngIf="errorMessage" class="error">
        {{ errorMessage }}
      </div>
      <div *ngIf="successMessage" class="success">
        {{ successMessage }}
      </div>
  </div>
</div>
